<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sadhguru MY 2026 — Link Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Nunito+Sans:wght@300;400;600&display=swap" rel="stylesheet"/>

  <!-- Supabase JS v2 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root{
      --bg:#000000;
      --panel:rgba(20,20,24,0.9);
      --card:#ffffff;
      --ink:#1c1b1a;
      --muted:#8d8d8d;
      --accent:#c87c10;
      --accent-soft:rgba(200,124,16,0.3);
      --brand-btn1:#d7ecff;
      --brand-btn2:#a9d8ff;
      --brand-btn-text:#05345a;
      --line:rgba(255,255,255,0.06);
      --radius-lg:20px;
      --radius-sm:12px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      min-height:100vh;
      font-family:"Nunito Sans",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background-image:
        linear-gradient(to bottom,rgba(0,0,0,0.55),rgba(0,0,0,0.9)),
        url("https://i.imgur.com/2EgTWuw.jpeg");
      background-position:center center;
      background-size:cover;
      background-repeat:no-repeat;
      background-attachment:fixed;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#f5f5f5;
      padding:16px;
    }
    .overlay{
      width:100%;
      max-width:720px;
      background:radial-gradient(circle at top,rgba(255,255,255,0.1),rgba(0,0,0,0.75));
      border-radius:var(--radius-lg);
      border:1px solid rgba(255,255,255,0.08);
      box-shadow:0 22px 55px rgba(0,0,0,0.6);
      backdrop-filter:blur(4px);
      padding:18px;
    }
    .card{
      background:var(--card);
      color:var(--ink);
      border-radius:var(--radius-lg);
      padding:20px 20px 16px;
      border:1px solid var(--accent-soft);
    }
    h1{
      font-family:"Cinzel",serif;
      font-size:1.6rem;
      letter-spacing:.12em;
      text-transform:uppercase;
      margin-bottom:4px;
    }
    .subtitle{
      font-size:.9rem;
      color:var(--muted);
      margin-bottom:16px;
    }
    form{
      display:flex;
      flex-direction:column;
      gap:14px;
      margin-top:8px;
    }
    label{
      font-size:.82rem;
      text-transform:uppercase;
      letter-spacing:.14em;
      color:var(--muted);
      display:block;
      margin-bottom:4px;
    }
    .field{
      margin-bottom:4px;
    }
    input[type="url"],
    input[type="text"]{
      width:100%;
      padding:10px 11px;
      border-radius:10px;
      border:1px solid rgba(0,0,0,0.08);
      background:#fafafa;
      font-size:.9rem;
      font-family:inherit;
      outline:none;
      transition:border .15s, box-shadow .15s, background .15s;
    }
    input[type="url"]:focus,
    input[type="text"]:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(200,124,16,0.35);
      background:#ffffff;
    }
    .hint{
      font-size:.78rem;
      color:var(--muted);
      margin-top:2px;
    }

    .actions{
      margin-top:14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    .cta-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:12px 26px;
      border-radius:999px;
      border:none;
      background:linear-gradient(135deg,var(--brand-btn1),var(--brand-btn2));
      color:var(--brand-btn-text);
      font-family:'Roboto',system-ui,-apple-system,'Segoe UI',sans-serif;
      font-weight:700;
      font-size:.98rem;
      text-transform:uppercase;
      letter-spacing:.14em;
      cursor:pointer;
      text-decoration:none;
      box-shadow:0 14px 30px rgba(0,0,0,0.25);
      transition:transform .15s, box-shadow .15s, background .2s;
      min-width:220px;
    }
    .cta-btn:hover{
      transform:translateY(-1px) scale(1.01);
      box-shadow:0 18px 36px rgba(0,0,0,0.3);
      background:linear-gradient(135deg,#e2f2ff,#b4ddff);
    }
    .cta-btn:active{
      transform:translateY(0) scale(0.99);
      box-shadow:0 10px 22px rgba(0,0,0,0.2);
    }
    .cta-btn span.icon{
      font-size:1.1rem;
    }
    .status{
      margin-top:10px;
      font-size:.85rem;
      min-height:1.25em;
    }
    .status.ok{
      color:#1f7a3a;
    }
    .status.err{
      color:#b73232;
    }

    .preview{
      margin-top:14px;
      padding-top:12px;
      border-top:1px dashed #ddd;
      font-size:.82rem;
      color:var(--muted);
    }
    code{
      font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:.8rem;
      background:#f1f1f1;
      border-radius:6px;
      padding:3px 6px;
      color:#333;
      word-break:break-all;
    }

    @media (max-width:640px){
      .overlay{
        padding:12px;
      }
      .card{
        padding:16px 14px 14px;
      }
      h1{
        font-size:1.3rem;
      }
    }
  </style>
</head>
<body>
  <div class="overlay">
    <div class="card">
      <h1>Link Settings</h1>
      <p class="subtitle">
        Save a pair of URLs for the countdown page. Each save creates a new ID you can use like:
        <code>sim-output.html?id=123</code>
      </p>

      <form id="linkForm">
        <div class="field">
          <label for="buttonUrl">Button URL</label>
          <input type="url" id="buttonUrl" name="buttonUrl" placeholder="https://isha.to/my/sim-eoi" required />
          <div class="hint">This will be used for the “Register Your Interest” button.</div>
        </div>

        <div class="field">
          <label for="imageUrl">Hero Image URL</label>
          <input type="url" id="imageUrl" name="imageUrl" placeholder="https://i.imgur.com/2EgTWuw.jpeg" required />
          <div class="hint">This will be used for the hero image and page background.</div>
        </div>

        <div class="actions">
          <button type="submit" class="cta-btn">
            <span class="icon">✶</span>
            <span>Save Settings</span>
          </button>
        </div>

        <div id="status" class="status"></div>

        <div id="preview" class="preview" style="display:none;">
          <div>Saved with ID: <strong id="savedId"></strong></div>
          <div>Use this on the public page:</div>
          <div><code id="previewUrl"></code></div>
        </div>
      </form>
    </div>
  </div>

  <script>
    // TODO: replace with your actual Supabase details
    const SUPABASE_URL = 'https://ychesvsaszfzsqgjgibe.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljaGVzdnNhc3pmenNxZ2pnaWJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MzEzMTIsImV4cCI6MjA4MDAwNzMxMn0.gqTfXRkdjL5W7JJKks1mB6ISVYb-ylS8a6_qkvamWAk';

    const client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const form = document.getElementById('linkForm');
    const statusEl = document.getElementById('status');
    const previewBox = document.getElementById('preview');
    const savedIdEl = document.getElementById('savedId');
    const previewUrlEl = document.getElementById('previewUrl');

    function setStatus(message, ok = true){
      statusEl.textContent = message;
      statusEl.className = 'status ' + (ok ? 'ok' : 'err');
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      setStatus('Saving...', true);
      previewBox.style.display = 'none';

      const button_url = form.buttonUrl.value.trim();
      const image_url  = form.imageUrl.value.trim();

      if (!button_url || !image_url){
        setStatus('Please fill in both URLs.', false);
        return;
      }

      try{
        const { data, error } = await client
          .from('sim_links')
          .insert([{ button_url, image_url }])
          .select()
          .single();

        if (error){
          console.error(error);
          setStatus('Error saving to Supabase: ' + error.message, false);
          return;
        }

        setStatus('Saved successfully.', true);

        if (data && data.id != null){
          const id = data.id;
          savedIdEl.textContent = id;

          // Adjust this path to match your real output page path
          const base = window.location.origin + '/sim-output.html';
          const url = `${base}?id=${id}`;

          previewUrlEl.textContent = url;
          previewBox.style.display = 'block';
        }
      }catch(err){
        console.error(err);
        setStatus('Unexpected error: ' + err.message, false);
      }
    });
  </script>
</body>
</html>
